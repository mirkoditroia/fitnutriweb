"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{2208:(e,t,a)=>{a.d(t,{sH:()=>_,mf:()=>B,VA:()=>m,ho:()=>w,dd:()=>I,G9:()=>E,fH:()=>g,ZY:()=>b,vq:()=>h,wb:()=>P,TP:()=>y,Kh:()=>p,_L:()=>S});var r=a(9708),i=a(2078),o=a(2553),n=a(2377),l=a(5704);let c=n.Ik({NEXT_PUBLIC_FIREBASE_API_KEY:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_PROJECT_ID:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_APP_ID:n.Yj().optional().default(""),NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID:n.Yj().optional().default("")}).parse({NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyAp1IXe0d2yE-BSrZLGKHfDkdkm1NuSwfs",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"gznutrition-d5d13.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"gznutrition-d5d13",NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:"gznutrition-d5d13.firebasestorage.app",NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:"658719519730",NEXT_PUBLIC_FIREBASE_APP_ID:"1:658719519730:web:37dafec47d6f4e6c0db16b",NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID:l.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID});a(4663);let s={apiKey:c.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.NEXT_PUBLIC_FIREBASE_APP_ID},d=c.NEXT_PUBLIC_FIREBASE_API_KEY&&c.NEXT_PUBLIC_FIREBASE_PROJECT_ID&&c.NEXT_PUBLIC_FIREBASE_APP_ID?(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)(s):null;d&&(0,o.xI)(d);let u=d?(0,r.aU)(d):void 0,f={packages:e=>(0,r.rJ)(e,"packages"),bookings:e=>(0,r.rJ)(e,"bookings"),clients:e=>(0,r.rJ)(e,"clients"),content:e=>(0,r.H9)(e,"content/landing"),availability:(e,t)=>(0,r.H9)(e,"availability/".concat(t))};async function E(){return u?(await (0,r.GG)((0,r.P)(f.packages(u),(0,r.My)("title")))).docs.map(e=>({id:e.id,...e.data()})):[]}async function p(e){var t,a,i;if(e.id){let{id:t,...a}=e;return await (0,r.BN)((0,r.H9)(u,"packages",t),a,{merge:!0}),t}return(await (0,r.gS)(f.packages(u),{title:e.title,description:e.description,price:e.price,imageUrl:null!=(t=e.imageUrl)?t:null,isActive:e.isActive,featured:null!=(a=e.featured)&&a,badge:null!=(i=e.badge)?i:null,createdAt:(0,r.O5)()})).id}async function b(){return u?(await (0,r.GG)((0,r.P)(f.bookings(u),(0,r.My)("createdAt","desc")))).docs.map(e=>{var t,a,r,i,o,n,l;return t=e.id,{id:t,clientId:null!=(r=(a=e.data()).clientId)?r:void 0,name:a.name,email:a.email,phone:null!=(i=a.phone)?i:void 0,packageId:null!=(o=a.packageId)?o:void 0,date:a.date,slot:null!=(n=a.slot)?n:void 0,status:a.status,priority:!!a.priority,channelPreference:null!=(l=a.channelPreference)?l:void 0,createdAt:A(a.createdAt)}}):[]}async function _(e){var t,a,i,o,n;if(!u)throw Error("Firestore not configured");return(await (0,r.gS)(f.bookings(u),{clientId:null!=(t=e.clientId)?t:null,name:e.name,email:e.email,phone:null!=(a=e.phone)?a:null,packageId:null!=(i=e.packageId)?i:null,date:e.date,slot:null!=(o=e.slot)?o:null,status:e.status,priority:!!e.priority,channelPreference:null!=(n=e.channelPreference)?n:null,createdAt:(0,r.O5)()})).id}async function h(e){if(!u)throw Error("Firestore not configured");if(!e.id)throw Error("Booking ID is required for update");let{id:t,...a}=e;if(await (0,r.BN)((0,r.H9)(u,"bookings",t),a,{merge:!0}),"confirmed"===e.status&&e.slot&&e.date)try{let t=e.date.split("T")[0],a=f.availability(u,t),i=await (0,r.x7)(a);if(i.exists()){let o=(i.data().slots||[]).filter(t=>t!==e.slot);await (0,r.BN)(a,{date:t,slots:o},{merge:!0})}}catch(e){console.error("Error updating availability in Firebase:",e)}}async function m(e){if(!u)throw Error("Firestore not configured");await (0,r.kd)((0,r.H9)(u,"bookings",e))}async function y(e){var t,a;if(!u)throw Error("Firestore not configured");if(e.id){let{id:t,...a}=e;return await (0,r.BN)((0,r.H9)(u,"clients",t),a,{merge:!0}),t}return(await (0,r.gS)(f.clients(u),{name:e.name,email:e.email,phone:null!=(t=e.phone)?t:null,notes:null!=(a=e.notes)?a:null,createdAt:(0,r.O5)()})).id}async function I(e){var t,a;if(!u)return null;let i=(0,r.P)((0,r.rJ)(u,"clients"),(0,r._M)("email","==",e)),o=await (0,r.GG)(i);if(o.empty)return null;let n=o.docs[0],l=n.data();return{id:n.id,name:l.name,email:l.email,phone:null!=(t=l.phone)?t:void 0,notes:null!=(a=l.notes)?a:void 0,createdAt:A(l.createdAt)}}async function g(){var e,t,a,i,o,n;if(!u)return null;let l=await (0,r.x7)(f.content(u));if(!l.exists())return null;let c=l.data();return{heroTitle:null!=(e=c.heroTitle)?e:"",heroSubtitle:null!=(t=c.heroSubtitle)?t:"",heroCta:null!=(a=c.heroCta)?a:"",aboutTitle:null!=(i=c.aboutTitle)?i:"",aboutBody:null!=(o=c.aboutBody)?o:"",aboutImageUrl:null!=(n=c.aboutImageUrl)?n:"",images:Array.isArray(c.images)?c.images:[],faq:Array.isArray(c.faq)?c.faq:[]}}async function S(e){await (0,r.BN)(f.content(u),e,{merge:!0})}async function w(e){if(!u)return null;let t=await (0,r.x7)(f.availability(u,e));if(!t.exists())return null;let a=t.data();return{date:e,slots:Array.isArray(a.slots)?a.slots:[]}}async function P(e,t){if(!u)throw Error("Firestore not configured");await (0,r.BN)(f.availability(u,e),{date:e,slots:t},{merge:!0})}function A(e){if(e)try{return e.toDate().toISOString()}catch(e){return}}let B=[{q:"Quanto tempo serve per vedere risultati?",a:"Generalmente 4–6 settimane per cambi visibili, dipende dall’aderenza."},{q:"Serve palestra?",a:"Consigliata ma non obbligatoria. Programmi adattabili anche a casa."},{q:"I piani sono personalizzati?",a:"S\xec: obiettivi, preferenze alimentari e disponibilit\xe0 oraria."},{q:"Come avviene il follow-up?",a:"Check-in settimanali e chat per aggiustamenti in tempo reale."},{q:"Posso sospendere?",a:"Puoi mettere in pausa e riprendere senza costi aggiuntivi."}]},3998:(e,t,a)=>{a.d(t,{$:()=>l});var r=a(5155),i=a(2115),o=a(5889),n=a(2821);let l=(0,i.forwardRef)((e,t)=>{let{className:a,variant:i="primary",size:l="md",fullWidth:c,...s}=e;return(0,r.jsx)("button",{ref:t,className:(0,o.QP)((0,n.$)("btn",{primary:"btn-primary",secondary:"btn-outline",ghost:"hover:bg-[color:var(--muted-bg)]",outline:"btn-outline"}[i],{sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[l],c&&"w-full"),a),...s})});l.displayName="Button"},9018:(e,t,a)=>{a.d(t,{sH:()=>d,VA:()=>f,ho:()=>h,dd:()=>p,G9:()=>l,fH:()=>b,ZY:()=>s,vq:()=>u,wb:()=>m,TP:()=>E,Kh:()=>c,_L:()=>_});var r=a(2208),i=a(5704);function o(){let e=i.env.NEXT_PUBLIC_DATA_MODE;return"local"===e||"demo"===e||"firebase"===e?e:"firebase"}async function n(e,t){try{let a=await fetch(e,{cache:"no-store"});if(!a.ok)return t;return await a.json()}catch(e){return t}}async function l(){let e=o();if("firebase"===e)return(0,r.G9)();if("demo"===e)return n("/demo/packages.json",[]);try{let e=await fetch("/api/localdb/packages",{cache:"no-store"});if(e.ok)return await e.json()}catch(e){}return[]}async function c(e){var t;let a=o();if("firebase"===a)return(0,r.Kh)(e);if("demo"===a)throw Error("Preprod demo read-only");let i=null!=(t=e.id)?t:y(),n=await l(),c=[{...e,id:i},...n.filter(e=>e.id!==i)];return await fetch("/api/localdb/packages",{method:"POST",body:JSON.stringify(c)}),i}async function s(){let e=o();if("firebase"===e)return(0,r.ZY)();if("demo"===e)return n("/demo/bookings.json",[]);try{let e=await fetch("/api/localdb/bookings",{cache:"no-store"});if(e.ok)return await e.json()}catch(e){}return[]}async function d(e){let t=o();if("firebase"===t)return(0,r.sH)(e);if("demo"===t)throw Error("Preprod demo read-only");let a=y(),i=new Date().toISOString();try{let t=await fetch("/api/localdb/bookings",{cache:"no-store"}),r=t.ok?await t.json():[],o=[{...e,id:a,createdAt:i},...r];return await fetch("/api/localdb/bookings",{method:"POST",body:JSON.stringify(o)}),a}catch(t){return await fetch("/api/localdb/bookings",{method:"POST",body:JSON.stringify([{...e,id:a,createdAt:i}])}),a}}async function u(e){let t=o();if("firebase"===t)return(0,r.vq)(e);if("demo"===t)throw Error("Preprod demo read-only");try{let t=await fetch("/api/localdb/bookings",{cache:"no-store"}),a=(t.ok?await t.json():[]).map(t=>t.id===e.id?e:t);if(await fetch("/api/localdb/bookings",{method:"POST",body:JSON.stringify(a)}),"confirmed"===e.status&&e.slot&&e.date)try{let t=e.date.split("T")[0],a=await fetch("/api/localdb/availability",{cache:"no-store"}),r=a.ok?await a.json():{};r[t]&&(r[t]=r[t].filter(t=>t!==e.slot),await fetch("/api/localdb/availability",{method:"POST",body:JSON.stringify(r)}))}catch(e){console.error("Error updating availability:",e)}}catch(e){throw console.error("Error updating booking:",e),e}}async function f(e){let t=o();if("firebase"===t)return(0,r.VA)(e);if("demo"===t)throw Error("Preprod demo read-only");try{let t=await fetch("/api/localdb/bookings",{cache:"no-store"}),a=(t.ok?await t.json():[]).filter(t=>t.id!==e);await fetch("/api/localdb/bookings",{method:"POST",body:JSON.stringify(a)})}catch(e){throw console.error("Error deleting booking:",e),e}}async function E(e){var t,a,i;let n=o();if("firebase"===n)return(0,r.TP)(e);if("demo"===n)throw Error("Preprod demo read-only");let l=function(e,t){try{let a=localStorage.getItem(e);return a?JSON.parse(a):t}catch(e){return t}}("gzn:clients",[]),c=null!=(t=e.id)?t:y();return a="gzn:clients",i=[{...e,id:c},...l.filter(e=>e.id!==c)],localStorage.setItem(a,JSON.stringify(i)),c}async function p(e){var t,a;let i=o();if("firebase"===i)return(0,r.dd)(e);if("demo"===i)return null!=(t=(await n("/demo/clients.json",[])).find(t=>t.email===e))?t:null;try{let t=await fetch("/api/localdb/clients",{cache:"no-store"});return null!=(a=(t.ok?await t.json():[]).find(t=>t.email===e))?a:null}catch(e){return null}}async function b(){let e=o();if("firebase"===e)return(0,r.fH)();if("demo"===e)return n("/demo/siteContent.json",{heroTitle:"",heroSubtitle:"",heroCta:"Prenota ora",images:[],faq:[]});try{let e=await fetch("/api/localdb/siteContent",{cache:"no-store"});if(e.ok)return await e.json()}catch(e){}return{heroTitle:"",heroSubtitle:"",heroCta:"Prenota ora",aboutTitle:"",aboutBody:"",aboutImageUrl:"",images:[],faq:[]}}async function _(e){let t=o();if("firebase"===t)return(0,r._L)(e);if("demo"===t)throw Error("Preprod demo read-only");await fetch("/api/localdb/siteContent",{method:"POST",body:JSON.stringify(e)})}async function h(e){let t=o();if("firebase"===t)return(0,r.ho)(e);if("demo"===t)return n("/demo/availability/".concat(e,".json"),{date:e,slots:[]});try{var a;let t=await fetch("/api/localdb/availability",{cache:"no-store"}),r=t.ok?await t.json():{};return{date:e,slots:null!=(a=r[e])?a:[]}}catch(t){return{date:e,slots:[]}}}async function m(e,t){let a=o();if("firebase"===a)return(0,r.wb)(e,t);if("demo"===a)throw Error("Preprod demo read-only");try{let a=await fetch("/api/localdb/availability",{cache:"no-store"}),r=a.ok?await a.json():{};r[e]=t,await fetch("/api/localdb/availability",{method:"POST",body:JSON.stringify(r)})}catch(e){}}function y(){return"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():Math.random().toString(36).slice(2)}}}]);