(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{3646:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>t});var n=l(5155),r=l(2115),s=l(9018),o=l(3998),i=l(5142),d=l(2663),c=l(5197);function t(){var e,a,l,t,m,u,g,x,h,b,p,j;let[v,f]=(0,r.useState)(null),[C,N]=(0,r.useState)(!0),[E,y]=(0,r.useState)(!1),[I,z]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(0,s.getSiteContent)().then(e=>{f(null!=e?e:{heroTitle:"",heroSubtitle:"",heroCta:"Prenota ora",heroBackgroundImage:"",images:[],colorPalette:"gz-default"}),N(!1)})},[]),C||!v)return(0,n.jsx)("main",{className:"container py-8",children:"Caricamento..."});let k=async()=>{await (0,s.upsertSiteContent)(v),d.oR.success("Configurazione calendario salvata")},A=async()=>{y(!0);try{let e=await (0,c.Zl)();z(e),e.success?d.oR.success("Connessione Google Calendar riuscita!"):d.oR.error("Errore connessione: ".concat(e.message))}catch(e){d.oR.error("Errore nel test della connessione")}finally{y(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-foreground pt-4 tracking-tight",children:"Gestione Google Calendar"}),(0,n.jsxs)("div",{className:"admin-surface mt-6 rounded-xl p-6 space-y-8 border border-foreground/10 bg-background/70 backdrop-blur-sm shadow-md",children:[(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"font-semibold text-lg",children:"Stato Connessione"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((null==(e=v.googleCalendar)?void 0:e.isEnabled)?"bg-green-500":"bg-red-500")}),(0,n.jsx)("span",{className:"font-medium",children:(null==(a=v.googleCalendar)?void 0:a.isEnabled)?"Integrazione attiva":"Integrazione disattivata"})]}),(null==(l=v.googleCalendar)?void 0:l.isEnabled)&&(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.$,{onClick:A,disabled:E,className:"bg-blue-600 hover:bg-blue-700",children:E?"Testando...":"Test Connessione"}),(0,n.jsx)(o.$,{variant:"outline",onClick:()=>{var e;let a=null==(e=v.googleCalendar)?void 0:e.calendarId;a&&window.open("https://calendar.google.com/calendar/embed?src=".concat(encodeURIComponent(a)),"_blank")},children:"Apri Calendario"}),(0,n.jsx)(o.$,{variant:"outline",onClick:()=>{var e;let a=null==(e=v.googleCalendar)?void 0:e.calendarId;a&&window.open("https://calendar.google.com/calendar/r/settings/".concat(encodeURIComponent(a)),"_blank")},children:"Impostazioni Calendario"})]}),I&&(0,n.jsxs)("div",{className:"p-4 rounded-lg border ".concat(I.success?"border-green-200 bg-green-50 text-green-800":"border-red-200 bg-red-50 text-red-800"),children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:I.success?"✅ Connessione Riuscita":"❌ Errore Connessione"}),(0,n.jsx)("p",{className:"text-sm",children:I.message}),I.calendarInfo&&(0,n.jsxs)("div",{className:"mt-3 text-sm",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"ID Calendario:"})," ",I.calendarInfo.id]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Nome:"})," ",I.calendarInfo.summary]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Timezone:"})," ",I.calendarInfo.timeZone]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Eventi recenti:"})," ",I.calendarInfo.eventsCount]})]})]})]}),(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"font-semibold text-lg",children:"Configurazione"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("input",{type:"checkbox",id:"calendarEnabled",checked:null!=(h=null==(t=v.googleCalendar)?void 0:t.isEnabled)&&h,onChange:e=>f({...v,googleCalendar:{...v.googleCalendar,isEnabled:e.target.checked}}),className:"text-primary"}),(0,n.jsx)("label",{htmlFor:"calendarEnabled",className:"font-medium",children:"Abilita sincronizzazione Google Calendar"})]}),(null==(m=v.googleCalendar)?void 0:m.isEnabled)&&(0,n.jsx)("div",{className:"space-y-4 p-4 border border-border rounded-lg bg-background/50",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,n.jsx)(i.p,{label:"Calendar ID",value:null!=(b=null==(u=v.googleCalendar)?void 0:u.calendarId)?b:"",onChange:e=>f({...v,googleCalendar:{...v.googleCalendar,calendarId:e.target.value}}),placeholder:"ID del calendario Google"}),(0,n.jsx)(i.p,{label:"Timezone",value:null!=(p=null==(g=v.googleCalendar)?void 0:g.timezone)?p:"",onChange:e=>f({...v,googleCalendar:{...v.googleCalendar,timezone:e.target.value}}),placeholder:"Europe/Rome"}),(0,n.jsx)(i.p,{label:"Service Account Email",value:null!=(j=null==(x=v.googleCalendar)?void 0:x.serviceAccountEmail)?j:"",onChange:e=>f({...v,googleCalendar:{...v.googleCalendar,serviceAccountEmail:e.target.value}}),placeholder:"email@project.iam.gserviceaccount.com"})]})})]}),(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"font-semibold text-lg",children:"Informazioni"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"font-medium text-blue-600",children:"✅ Funzionalit\xe0 Attive"}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,n.jsx)("li",{children:"• Sincronizzazione automatica prenotazioni"}),(0,n.jsx)("li",{children:"• Creazione eventi per consultazioni"}),(0,n.jsx)("li",{children:"• Promemoria automatici (24h + 30min)"}),(0,n.jsx)("li",{children:"• Colori diversi per tipo evento"}),(0,n.jsx)("li",{children:"• Invio email ai partecipanti"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h3",{className:"font-medium text-orange-600",children:"⚠️ Requisiti"}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,n.jsx)("li",{children:"• Service Account Google attivo"}),(0,n.jsx)("li",{children:"• Calendario condiviso correttamente"}),(0,n.jsx)("li",{children:"• Permessi di scrittura sul calendario"}),(0,n.jsx)("li",{children:"• Variabili ambiente configurate"})]})]})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDD27 Variabili Ambiente"}),(0,n.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"GCAL_ENABLED=true"})," - Abilita l'integrazione"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"GCAL_CALENDAR_ID"})," - ID del calendario (opzionale)"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"GCAL_TIMEZONE"})," - Timezone (opzionale)"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"GOOGLE_CLIENT_EMAIL"})," - Email service account"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("code",{children:"GOOGLE_PRIVATE_KEY"})," - Chiave privata service account"]})]})]})]}),(0,n.jsx)("div",{className:"flex justify-end pt-4",children:(0,n.jsx)(o.$,{onClick:k,className:"bg-green-600 hover:bg-green-700",children:"Salva Configurazione"})})]})]})}},3998:(e,a,l)=>{"use strict";l.d(a,{$:()=>i});var n=l(5155),r=l(2115),s=l(5889),o=l(2821);let i=(0,r.forwardRef)((e,a)=>{let{className:l,variant:r="primary",size:i="md",fullWidth:d,...c}=e;return(0,n.jsx)("button",{ref:a,className:(0,s.QP)((0,o.$)("btn",{primary:"btn-primary",secondary:"btn-outline",ghost:"hover:bg-[color:var(--muted-bg)]",outline:"btn-outline"}[r],{sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[i],d&&"w-full"),l),...c})});i.displayName="Button"},4008:(e,a,l)=>{Promise.resolve().then(l.bind(l,3646))},5142:(e,a,l)=>{"use strict";l.d(a,{p:()=>o});var n=l(5155),r=l(2115),s=l(5889);let o=(0,r.forwardRef)((e,a)=>{let{className:l,label:r,error:o,id:i,...d}=e,c=i||d.name||"input";return(0,n.jsxs)("div",{className:"w-full",children:[r&&(0,n.jsx)("label",{htmlFor:c,className:"block text-sm font-medium mb-1 text-foreground",children:r}),(0,n.jsx)("input",{id:c,ref:a,className:(0,s.QP)("w-full rounded-lg border border-foreground/10 bg-background/70 backdrop-blur-sm px-3.5 py-2.5 text-sm text-foreground placeholder:text-foreground/50","focus:outline-none focus:ring-4 focus:ring-[rgba(var(--primary-rgb),0.15)] focus:ring-offset-0",o&&"border-accent",l),"aria-invalid":!!o,"aria-describedby":o?"".concat(c,"-error"):void 0,...d}),o&&(0,n.jsx)("p",{id:"".concat(c,"-error"),className:"mt-1 text-xs text-destructive",children:o})]})});o.displayName="Input"}},e=>{e.O(0,[9135,3965,8744,9719,576,8441,1255,7358],()=>e(e.s=4008)),_N_E=e.O()}]);