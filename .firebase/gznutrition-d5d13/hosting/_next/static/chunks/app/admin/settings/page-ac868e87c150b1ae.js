(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{601:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>d});var t=l(5155),s=l(2115),i=l(3998),o=l(5142),r=l(2663),n=l(9018),c=l(576);function d(){var e,a,l,d,m;let[x,u]=(0,s.useState)(null),[b,g]=(0,s.useState)(!0),[p,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,n.getSiteContent)();u(e)}catch(e){console.error("Error loading content:",e),r.oR.error("Errore nel caricamento delle impostazioni")}finally{g(!1)}})()},[]);let f=async()=>{if(x){h(!0);try{await (0,n.upsertSiteContent)(x),(0,c.X2)(),r.oR.success("Impostazioni salvate con successo!")}catch(e){console.error("Error saving settings:",e),r.oR.error("Errore nel salvare le impostazioni")}finally{h(!1)}}},v=async()=>{try{let e=await fetch("https://testemailconfiguration-4ks3j6nupa-uc.a.run.app"),a=await e.json();a.success?r.oR.success("✅ Configurazione email valida!"):r.oR.error("❌ Errore configurazione: ".concat(a.message))}catch(e){console.error("Error testing email:",e),r.oR.error("Errore nel test email")}},j=async()=>{if(!(null==x?void 0:x.notificationEmail))return void r.oR.error("Inserisci prima l'email di notifica");try{let e=await fetch("https://sendbookingnotification-4ks3j6nupa-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"new-booking",booking:{id:"test-123",name:"Cliente Test",email:"cliente.test@example.com",phone:"+39 123 456 7890",date:new Date().toISOString(),slot:"10:00",location:"online",status:"pending",isFreeConsultation:!1,notes:"Questa \xe8 una prenotazione di test per verificare il sistema di notifiche email."},packageTitle:"Pacchetto Test",notificationEmail:x.notificationEmail,businessName:x.businessName,colorPalette:x.colorPalette})}),a=await e.json();a.success?r.oR.success("\uD83D\uDCE7 Email di test inviata a: ".concat(x.notificationEmail)):r.oR.error("❌ Errore invio: ".concat(a.message))}catch(e){console.error("Error sending test email:",e),r.oR.error("Errore nell'invio dell'email di test")}};return b?(0,t.jsxs)("main",{className:"container py-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Impostazioni Avanzate"}),(0,t.jsx)("p",{className:"mt-4 text-black/70",children:"Caricamento..."})]}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-black pt-4 tracking-tight",children:"Impostazioni Avanzate"}),(0,t.jsxs)("div",{className:"admin-surface mt-6 rounded-xl p-6 space-y-8 border border-foreground/10 bg-background/70 backdrop-blur-sm shadow-md",children:[(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDCE7 Notifiche Email"}),(0,t.jsx)("p",{className:"text-sm text-black/70",children:"Configura l'email dove ricevere le notifiche delle nuove prenotazioni."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Nome Studio/Nutrizionista"}),(0,t.jsx)(o.p,{value:x.businessName||"",onChange:e=>u({...x,businessName:e.target.value}),placeholder:"GZ Nutrition",className:"max-w-md"}),(0,t.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Nome che apparir\xe0 nelle email di notifica e in altre comunicazioni"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Email Nutrizionista"}),(0,t.jsx)(o.p,{type:"email",value:x.notificationEmail||"",onChange:e=>u({...x,notificationEmail:e.target.value}),placeholder:"nutrizionista@example.com",className:"max-w-md"}),(0,t.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Indirizzo email dove ricevere le notifiche delle nuove prenotazioni"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(i.$,{onClick:v,variant:"outline",size:"sm",children:"\uD83E\uDDEA Testa Configurazione"}),(0,t.jsx)(i.$,{onClick:j,variant:"outline",size:"sm",disabled:!x.notificationEmail,children:"\uD83D\uDCE7 Invia Email Test"})]})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDD12 Sicurezza CAPTCHA"}),(0,t.jsx)("p",{className:"text-sm text-black/70",children:"Proteggi il form di prenotazione da spam e bot con Google reCAPTCHA."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:!0===x.recaptchaEnabled,onChange:e=>u({...x,recaptchaEnabled:e.target.checked}),className:"rounded border-border"}),(0,t.jsx)("label",{className:"text-sm font-medium text-black",children:"Abilita verifica CAPTCHA per le prenotazioni"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Site Key reCAPTCHA v2"}),(0,t.jsx)(o.p,{value:x.recaptchaSiteKey||"",onChange:e=>u({...x,recaptchaSiteKey:e.target.value}),placeholder:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",className:"max-w-md font-mono text-xs"}),(0,t.jsxs)("p",{className:"text-xs text-black/60 mt-1",children:["Ottieni la Site Key da ",(0,t.jsx)("a",{href:"https://www.google.com/recaptcha/admin",target:"_blank",className:"text-blue-600 hover:underline",children:"Google reCAPTCHA Console"})]})]})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDCC5 Integrazione Google Calendar"}),(0,t.jsx)("p",{className:"text-sm text-black/70",children:"Configura l'integrazione con Google Calendar per sincronizzare automaticamente le prenotazioni."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"calendarEnabled",checked:(null==(e=x.googleCalendar)?void 0:e.isEnabled)||!1,onChange:e=>u({...x,googleCalendar:{...x.googleCalendar,isEnabled:e.target.checked}}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,t.jsx)("label",{htmlFor:"calendarEnabled",className:"text-sm font-medium text-black",children:"Abilita sincronizzazione Google Calendar"})]}),(null==(a=x.googleCalendar)?void 0:a.isEnabled)&&(0,t.jsxs)("div",{className:"pl-7 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Calendar ID"}),(0,t.jsx)(o.p,{value:(null==(l=x.googleCalendar)?void 0:l.calendarId)||"",onChange:e=>u({...x,googleCalendar:{...x.googleCalendar,calendarId:e.target.value}}),placeholder:"calendario@group.calendar.google.com",className:"max-w-md"}),(0,t.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"ID del calendario Google dove creare gli eventi"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Timezone"}),(0,t.jsx)(o.p,{value:(null==(d=x.googleCalendar)?void 0:d.timezone)||"Europe/Rome",onChange:e=>u({...x,googleCalendar:{...x.googleCalendar,timezone:e.target.value}}),placeholder:"Europe/Rome",className:"max-w-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Service Account Email"}),(0,t.jsx)(o.p,{value:(null==(m=x.googleCalendar)?void 0:m.serviceAccountEmail)||"",onChange:e=>u({...x,googleCalendar:{...x.googleCalendar,serviceAccountEmail:e.target.value}}),placeholder:"service-account@project.iam.gserviceaccount.com",className:"max-w-md"}),(0,t.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Email del service account Google per l'autenticazione"})]})]})]})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDC1B Impostazioni Debug"}),(0,t.jsx)("p",{className:"text-sm text-black/70",children:"Controlla la visualizzazione dei log di debug nella console del browser."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:!1!==x.debugLogsEnabled,onChange:e=>u({...x,debugLogsEnabled:e.target.checked}),className:"rounded border-border"}),(0,t.jsx)("label",{className:"text-sm font-medium text-black",children:"Abilita log di debug in console"})]}),(0,t.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["\uD83D\uDCA1 ",(0,t.jsx)("strong",{children:"Info:"})," I log di debug mostrano informazioni dettagliate sul funzionamento del sistema. Disabilita questa opzione in produzione per migliorare le performance e ridurre il rumore nella console."]})}),!1!==x.debugLogsEnabled&&(0,t.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-yellow-700",children:["⚠️ I log di debug sono attualmente ",(0,t.jsx)("strong",{children:"abilitati"}),". Ricorda di disabilitarli in produzione."]})})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,t.jsx)(i.$,{onClick:f,disabled:p,className:"bg-primary hover:bg-primary/90",children:p?"Salvando...":"\uD83D\uDCBE Salva Impostazioni"})})]})]}):(0,t.jsxs)("main",{className:"container py-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Impostazioni Avanzate"}),(0,t.jsx)("p",{className:"mt-4 text-red-600",children:"Errore nel caricamento delle impostazioni"})]})}},3998:(e,a,l)=>{"use strict";l.d(a,{$:()=>r});var t=l(5155),s=l(2115),i=l(5889),o=l(2821);let r=(0,s.forwardRef)((e,a)=>{let{className:l,variant:s="primary",size:r="md",fullWidth:n,...c}=e;return(0,t.jsx)("button",{ref:a,className:(0,i.QP)((0,o.$)("btn",{primary:"btn-primary",secondary:"btn-outline",ghost:"hover:bg-[color:var(--muted-bg)]",outline:"btn-outline"}[s],{sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[r],n&&"w-full"),l),...c})});r.displayName="Button"},5142:(e,a,l)=>{"use strict";l.d(a,{p:()=>o});var t=l(5155),s=l(2115),i=l(5889);let o=(0,s.forwardRef)((e,a)=>{let{className:l,label:s,error:o,id:r,...n}=e,c=r||n.name||"input";return(0,t.jsxs)("div",{className:"w-full",children:[s&&(0,t.jsx)("label",{htmlFor:c,className:"block text-sm font-medium mb-1 text-foreground",children:s}),(0,t.jsx)("input",{id:c,ref:a,className:(0,i.QP)("w-full rounded-lg border border-foreground/10 bg-background/70 backdrop-blur-sm px-3.5 py-2.5 text-sm text-foreground placeholder:text-foreground/50","focus:outline-none focus:ring-4 focus:ring-[rgba(var(--primary-rgb),0.15)] focus:ring-offset-0",o&&"border-accent",l),"aria-invalid":!!o,"aria-describedby":o?"".concat(c,"-error"):void 0,...n}),o&&(0,t.jsx)("p",{id:"".concat(c,"-error"),className:"mt-1 text-xs text-destructive",children:o})]})});o.displayName="Input"},8395:(e,a,l)=>{Promise.resolve().then(l.bind(l,601))}},e=>{e.O(0,[9135,3965,8744,9719,576,8441,1255,7358],()=>e(e.s=8395)),_N_E=e.O()}]);