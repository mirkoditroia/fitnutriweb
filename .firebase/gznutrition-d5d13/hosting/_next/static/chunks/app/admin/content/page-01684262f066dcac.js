(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[556],{3678:(e,a,l)=>{"use strict";l.d(a,{s:()=>n});var s=l(5155),t=l(2115);function n(e){let{folder:a="uploads",onUploaded:l}=e,n=(0,t.useRef)(null),[r,i]=(0,t.useState)(!1),o=async e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(t){i(!0);try{let e=new FormData;e.append("file",t),e.append("folder",a);let s=await fetch("/api/upload",{method:"POST",body:e}),n=await s.json();if(!s.ok)throw Error(n.error||"upload failed");l(n.url)}catch(e){console.error(e),alert("Upload fallito")}finally{i(!1)}}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{type:"button",className:"btn-outline",onClick:()=>{var e;return null==(e=n.current)?void 0:e.click()},disabled:r,children:r?"Caricamento...":"Carica immagine"}),(0,s.jsx)("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:o})]})}},5142:(e,a,l)=>{"use strict";l.d(a,{p:()=>r});var s=l(5155),t=l(2115),n=l(5889);let r=(0,t.forwardRef)((e,a)=>{let{className:l,label:t,error:r,id:i,...o}=e,d=i||o.name||"input";return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsx)("label",{htmlFor:d,className:"block text-sm font-medium mb-1",children:t}),(0,s.jsx)("input",{id:d,ref:a,className:(0,n.QP)("w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm placeholder:text-foreground/50 focus-visible:outline-primary",r&&"border-accent",l),"aria-invalid":!!r,"aria-describedby":r?"".concat(d,"-error"):void 0,...o}),r&&(0,s.jsx)("p",{id:"".concat(d,"-error"),className:"mt-1 text-xs text-accent",children:r})]})});r.displayName="Input"},5313:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>c});var s=l(5155),t=l(2115),n=l(9018),r=l(5142),i=l(3998),o=l(2663),d=l(3678);function c(){var e,a,l,c,u;let[m,x]=(0,t.useState)(null),[g,h]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{(0,n.fH)().then(e=>{x(null!=e?e:{heroTitle:"",heroSubtitle:"",heroCta:"Prenota ora",images:[],faq:[]}),h(!1)})},[]),g||!m)return(0,s.jsx)("main",{className:"container py-8",children:"Caricamento..."});let b=async()=>{await (0,n._L)(m),o.oR.success("Contenuti salvati")},p=(e,a,l)=>{var s;let t=[...null!=(s=m.faq)?s:[]];t[e]={...t[e],[a]:l},x({...m,faq:t})},f=(e,a,l)=>{var s,t;let n=[...null!=(s=m.images)?s:[]],r=null!=(t=n[e])?t:{key:"",url:""};n[e]={...r,[a]:l},x({...m,images:n})};return(0,s.jsxs)("main",{className:"container py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Contenuti Landing"}),(0,s.jsxs)("div",{className:"mt-6 card p-6 space-y-6",children:[(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Hero"}),(0,s.jsx)(r.p,{label:"Hero title",value:m.heroTitle,onChange:e=>x({...m,heroTitle:e.target.value})}),(0,s.jsx)(r.p,{label:"Hero subtitle",value:m.heroSubtitle,onChange:e=>x({...m,heroSubtitle:e.target.value})}),(0,s.jsx)(r.p,{label:"Hero CTA",value:m.heroCta,onChange:e=>x({...m,heroCta:e.target.value})})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Presentazione nutrizionista"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,s.jsx)(r.p,{label:"About title",value:null!=(e=m.aboutTitle)?e:"",onChange:e=>x({...m,aboutTitle:e.target.value})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"About image URL"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{className:"w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm",value:null!=(a=m.aboutImageUrl)?a:"",onChange:e=>x({...m,aboutImageUrl:e.target.value})}),(0,s.jsx)(d.s,{folder:"content",onUploaded:e=>x({...m,aboutImageUrl:e})})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"About body"}),(0,s.jsx)("textarea",{className:"w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm",rows:5,value:null!=(l=m.aboutBody)?l:"",onChange:e=>x({...m,aboutBody:e.target.value})})]})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"FAQ"}),(0,s.jsx)(i.$,{type:"button",onClick:()=>{var e;return x({...m,faq:[...null!=(e=m.faq)?e:[],{q:"",a:""}]})},children:"Aggiungi domanda"})]}),(0,s.jsx)("div",{className:"space-y-3",children:(null!=(c=m.faq)?c:[]).map((e,a)=>(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,s.jsx)(r.p,{label:"Domanda",value:e.q,onChange:e=>p(a,"q",e.target.value)}),(0,s.jsx)(r.p,{label:"Risposta",value:e.a,onChange:e=>p(a,"a",e.target.value)}),(0,s.jsx)("button",{className:"btn-outline",onClick:()=>{var e;return x({...m,faq:(null!=(e=m.faq)?e:[]).filter((e,l)=>l!==a)})},children:"Rimuovi"})]},a))})]}),(0,s.jsxs)("section",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"Immagini sezione"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.s,{folder:"content",onUploaded:e=>{var a;x({...m,images:[...null!=(a=m.images)?a:[],{key:"",url:e}]})}}),(0,s.jsx)(i.$,{type:"button",onClick:()=>{var e;return x({...m,images:[...null!=(e=m.images)?e:[],{key:"",url:""}]})},children:"Aggiungi immagine"})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:(null!=(u=m.images)?u:[]).map((e,a)=>(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-end",children:[(0,s.jsx)(r.p,{label:"Key",value:e.key,onChange:e=>f(a,"key",e.target.value)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"URL immagine"}),(0,s.jsx)("input",{className:"w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm",value:e.url,onChange:e=>f(a,"url",e.target.value)})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.s,{folder:"content",onUploaded:e=>f(a,"url",e)}),(0,s.jsx)("button",{className:"btn-outline",onClick:()=>{var e;return x({...m,images:(null!=(e=m.images)?e:[]).filter((e,l)=>l!==a)})},children:"Rimuovi"})]})]},a))})]}),(0,s.jsx)("div",{className:"flex justify-end pt-2",children:(0,s.jsx)(i.$,{onClick:b,children:"Salva contenuti"})})]})]})}},8041:(e,a,l)=>{Promise.resolve().then(l.bind(l,5313))}},e=>{e.O(0,[135,965,663,136,569,441,255,358],()=>e(e.s=8041)),_N_E=e.O()}]);