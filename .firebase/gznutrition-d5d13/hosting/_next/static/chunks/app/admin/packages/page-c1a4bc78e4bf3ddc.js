(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{3678:(e,a,t)=>{"use strict";t.d(a,{s:()=>s});var l=t(5155),r=t(2115);function s(e){let{folder:a="uploads",onUploaded:t}=e,s=(0,r.useRef)(null),[i,n]=(0,r.useState)(!1),c=async e=>{var l;let r=null==(l=e.target.files)?void 0:l[0];if(r){n(!0);try{let e=new FormData;e.append("file",r),e.append("folder",a);let l=await fetch("/api/upload",{method:"POST",body:e}),s=await l.json();if(!l.ok)throw Error(s.error||"upload failed");t(s.url)}catch(e){console.error(e),alert("Upload fallito")}finally{n(!1)}}};return(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{type:"button",className:"btn-outline",onClick:()=>{var e;return null==(e=s.current)?void 0:e.click()},disabled:i,children:i?"Caricamento...":"Carica immagine"}),(0,l.jsx)("input",{ref:s,type:"file",accept:"image/*",className:"hidden",onChange:c})]})}},5142:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var l=t(5155),r=t(2115),s=t(5889);let i=(0,r.forwardRef)((e,a)=>{let{className:t,label:r,error:i,id:n,...c}=e,d=n||c.name||"input";return(0,l.jsxs)("div",{className:"w-full",children:[r&&(0,l.jsx)("label",{htmlFor:d,className:"block text-sm font-medium mb-1",children:r}),(0,l.jsx)("input",{id:d,ref:a,className:(0,s.QP)("w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm placeholder:text-foreground/50 focus-visible:outline-primary",i&&"border-accent",t),"aria-invalid":!!i,"aria-describedby":i?"".concat(d,"-error"):void 0,...c}),i&&(0,l.jsx)("p",{id:"".concat(d,"-error"),className:"mt-1 text-xs text-accent",children:i})]})});i.displayName="Input"},5283:(e,a,t)=>{Promise.resolve().then(t.bind(t,6509))},6509:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var l=t(5155),r=t(2115),s=t(9018),i=t(5142),n=t(3998),c=t(2663),d=t(3678);function o(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(!0);if((0,r.useEffect)(()=>{(0,s.G9)().then(e=>{a(e),o(!1)})},[]),t)return(0,l.jsx)("main",{className:"container py-8",children:"Caricamento..."});let m=async t=>{let l=await (0,s.Kh)(e[t]);a(e.map((e,a)=>a===t?{...e,id:l}:e)),c.oR.success("Pacchetto salvato")};return(0,l.jsxs)("main",{className:"container py-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Pacchetti"}),(0,l.jsx)("div",{className:"mt-4 flex justify-end",children:(0,l.jsx)(n.$,{onClick:()=>a([...e,{title:"",description:"",price:0,isActive:!0}]),children:"Aggiungi"})}),(0,l.jsx)("div",{className:"mt-4 grid gap-4",children:e.map((t,r)=>{var s,c,o;return(0,l.jsxs)("div",{className:"card p-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsx)(i.p,{label:"Titolo",value:t.title,onChange:t=>a(u(e,r,{title:t.target.value}))}),(0,l.jsx)(i.p,{label:"Prezzo",type:"number",value:t.price,onChange:t=>a(u(e,r,{price:Number(t.target.value)}))}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.p,{label:"Immagine URL",value:null!=(s=t.imageUrl)?s:"",onChange:t=>a(u(e,r,{imageUrl:t.target.value}))}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(d.s,{folder:"packages",onUploaded:t=>a(u(e,r,{imageUrl:t}))})})]}),(0,l.jsx)(i.p,{label:"Badge",value:null!=(c=t.badge)?c:"",onChange:t=>a(u(e,r,{badge:t.target.value}))}),(0,l.jsxs)("div",{className:"sm:col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Descrizione"}),(0,l.jsx)("textarea",{className:"w-full rounded-md border border-foreground/20 bg-background px-3 py-2 text-sm",rows:4,value:t.description,onChange:t=>a(u(e,r,{description:t.target.value}))})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!t.isActive,onChange:t=>a(u(e,r,{isActive:t.target.checked}))})," Attivo"]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!t.featured,onChange:t=>a(u(e,r,{featured:t.target.checked}))})," Featured"]}),(0,l.jsx)("div",{className:"sm:col-span-2",children:(0,l.jsx)(n.$,{onClick:()=>m(r),children:"Salva"})})]},null!=(o=t.id)?o:r)})})]})}function u(e,a,t){let l=[...e];return l[a]={...l[a],...t},l}}},e=>{e.O(0,[135,965,663,136,569,441,255,358],()=>e(e.s=5283)),_N_E=e.O()}]);