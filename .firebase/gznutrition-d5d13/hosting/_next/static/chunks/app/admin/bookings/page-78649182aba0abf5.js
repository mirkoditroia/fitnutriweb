(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{122:(e,t,a)=>{Promise.resolve().then(a.bind(a,616))},616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115),n=a(9018),i=a(3998),o=a(2663);function c(){let[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,d]=(0,s.useState)(!0),m=async()=>{try{let[e,a]=await Promise.all([(0,n.ZY)(),(0,n.G9)()]);t(e),c(a)}catch(e){console.error("Error loading data:",e),o.oR.error("Errore nel caricamento dei dati")}finally{d(!1)}};(0,s.useEffect)(()=>{m()},[]);let x=async e=>{try{await (0,n.vq)({...e,status:"confirmed"}),await m(),o.oR.success("Prenotazione confermata!")}catch(e){console.error("Error confirming booking:",e),o.oR.error("Errore nella conferma della prenotazione")}},u=async e=>{if(window.confirm("Sei sicuro di voler rifiutare ed eliminare la prenotazione di ".concat(e.name,"?\n\nQuesta azione non pu\xf2 essere annullata.")))try{await (0,n.VA)(e.id),await m(),o.oR.success("Prenotazione rifiutata ed eliminata")}catch(e){console.error("Error deleting booking:",e),o.oR.error("Errore nell'eliminazione della prenotazione")}};return l?(0,r.jsxs)("main",{className:"container py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Prenotazioni"}),(0,r.jsx)("p",{className:"mt-4 text-foreground/70",children:"Caricamento..."})]}):(0,r.jsxs)("main",{className:"container py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Prenotazioni"}),(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[e.map(e=>{var t;return(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"font-semibold",children:e.name}),(0,r.jsx)("span",{className:"chip text-xs ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"pending"===e.status?"In attesa":"confirmed"===e.status?"Confermata":"Rifiutata"}),e.priority&&(0,r.jsx)("span",{className:"chip bg-orange-100 text-orange-800 text-xs",children:"Priorit\xe0"})]}),(0,r.jsxs)("div",{className:"text-sm text-foreground/70",children:["\uD83D\uDCE7 ",e.email," ",e.phone&&"• \uD83D\uDCF1 ".concat(e.phone)]}),(0,r.jsxs)("div",{className:"text-sm text-foreground/70",children:["\uD83D\uDCC5 ",new Date(e.date).toLocaleDateString("it-IT"),e.slot&&" • ⏰ ".concat(new Date(e.slot).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}))]}),(0,r.jsxs)("div",{className:"text-sm text-foreground/70",children:["\uD83D\uDCE6 ",(e=>{if(!e)return"Nessun pacchetto";let t=a.find(t=>t.id===e);return t?t.title:"Pacchetto ".concat(e)})(e.packageId)]}),(0,r.jsxs)("div",{className:"text-xs text-foreground/50 mt-1",children:["Richiesta il: ",new Date(null!=(t=e.createdAt)?t:e.date).toLocaleString("it-IT")]})]}),"pending"===e.status&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{size:"sm",onClick:()=>x(e),className:"bg-green-600 hover:bg-green-700 text-white",children:"✅ Conferma"}),(0,r.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>u(e),className:"border-red-300 text-red-600 hover:bg-red-50",children:"\uD83D\uDDD1️ Rifiuta ed elimina"})]})]})},e.id)}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-foreground/70",children:"Nessuna prenotazione trovata."}),(0,r.jsx)("p",{className:"text-sm text-foreground/50 mt-1",children:"Le nuove richieste appariranno qui."})]})]})]})}}},e=>{e.O(0,[135,965,663,136,569,441,255,358],()=>e(e.s=122)),_N_E=e.O()}]);