(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{601:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(5155),l=t(2115),i=t(3998),n=t(5142),o=t(2663),r=t(9018);function c(){var e,a,t,c,d;let[m,x]=(0,l.useState)(null),[u,p]=(0,l.useState)(!0),[h,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,r.getSiteContent)();x(e)}catch(e){console.error("Error loading content:",e),o.oR.error("Errore nel caricamento delle impostazioni")}finally{p(!1)}})()},[]);let b=async()=>{if(m){g(!0);try{await (0,r.upsertSiteContent)(m),o.oR.success("Impostazioni salvate con successo!")}catch(e){console.error("Error saving settings:",e),o.oR.error("Errore nel salvare le impostazioni")}finally{g(!1)}}},v=async()=>{try{let e=await fetch("https://testemailconfiguration-4ks3j6nupa-uc.a.run.app"),a=await e.json();a.success?o.oR.success("✅ Configurazione email valida!"):o.oR.error("❌ Errore configurazione: ".concat(a.message))}catch(e){console.error("Error testing email:",e),o.oR.error("Errore nel test email")}},f=async()=>{if(!(null==m?void 0:m.notificationEmail))return void o.oR.error("Inserisci prima l'email di notifica");try{let e=await fetch("https://sendbookingnotification-4ks3j6nupa-uc.a.run.app",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"new-booking",booking:{id:"test-123",name:"Cliente Test",email:"cliente.test@example.com",phone:"+39 123 456 7890",date:new Date().toISOString(),slot:"10:00",location:"online",status:"pending",isFreeConsultation:!1,notes:"Questa \xe8 una prenotazione di test per verificare il sistema di notifiche email."},packageTitle:"Pacchetto Test",notificationEmail:m.notificationEmail,businessName:m.businessName,colorPalette:m.colorPalette})}),a=await e.json();a.success?o.oR.success("\uD83D\uDCE7 Email di test inviata a: ".concat(m.notificationEmail)):o.oR.error("❌ Errore invio: ".concat(a.message))}catch(e){console.error("Error sending test email:",e),o.oR.error("Errore nell'invio dell'email di test")}};return u?(0,s.jsxs)("main",{className:"container py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Impostazioni Avanzate"}),(0,s.jsx)("p",{className:"mt-4 text-black/70",children:"Caricamento..."})]}):m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-black pt-4 tracking-tight",children:"Impostazioni Avanzate"}),(0,s.jsxs)("div",{className:"admin-surface mt-6 rounded-xl p-6 space-y-8 border border-foreground/10 bg-background/70 backdrop-blur-sm shadow-md",children:[(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDCE7 Notifiche Email"}),(0,s.jsx)("p",{className:"text-sm text-black/70",children:"Configura l'email dove ricevere le notifiche delle nuove prenotazioni."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Nome Studio/Nutrizionista"}),(0,s.jsx)(n.p,{value:m.businessName||"",onChange:e=>x({...m,businessName:e.target.value}),placeholder:"GZ Nutrition",className:"max-w-md"}),(0,s.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Nome che apparir\xe0 nelle email di notifica e in altre comunicazioni"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Email Nutrizionista"}),(0,s.jsx)(n.p,{type:"email",value:m.notificationEmail||"",onChange:e=>x({...m,notificationEmail:e.target.value}),placeholder:"nutrizionista@example.com",className:"max-w-md"}),(0,s.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Indirizzo email dove ricevere le notifiche delle nuove prenotazioni"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.$,{onClick:v,variant:"outline",size:"sm",children:"\uD83E\uDDEA Testa Configurazione"}),(0,s.jsx)(i.$,{onClick:f,variant:"outline",size:"sm",disabled:!m.notificationEmail,children:"\uD83D\uDCE7 Invia Email Test"})]})]})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDD12 Sicurezza CAPTCHA"}),(0,s.jsx)("p",{className:"text-sm text-black/70",children:"Proteggi il form di prenotazione da spam e bot con Google reCAPTCHA."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:!1!==m.recaptchaEnabled,onChange:e=>x({...m,recaptchaEnabled:e.target.checked}),className:"rounded border-border"}),(0,s.jsx)("label",{className:"text-sm font-medium text-black",children:"Abilita verifica CAPTCHA per le prenotazioni"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Site Key reCAPTCHA v2"}),(0,s.jsx)(n.p,{value:m.recaptchaSiteKey||"",onChange:e=>x({...m,recaptchaSiteKey:e.target.value}),placeholder:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",className:"max-w-md font-mono text-xs"}),(0,s.jsxs)("p",{className:"text-xs text-black/60 mt-1",children:["Ottieni la Site Key da ",(0,s.jsx)("a",{href:"https://www.google.com/recaptcha/admin",target:"_blank",className:"text-blue-600 hover:underline",children:"Google reCAPTCHA Console"})]})]})]})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDCC5 Integrazione Google Calendar"}),(0,s.jsx)("p",{className:"text-sm text-black/70",children:"Configura l'integrazione con Google Calendar per sincronizzare automaticamente le prenotazioni."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"calendarEnabled",checked:(null==(e=m.googleCalendar)?void 0:e.isEnabled)||!1,onChange:e=>x({...m,googleCalendar:{...m.googleCalendar,isEnabled:e.target.checked}}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),(0,s.jsx)("label",{htmlFor:"calendarEnabled",className:"text-sm font-medium text-black",children:"Abilita sincronizzazione Google Calendar"})]}),(null==(a=m.googleCalendar)?void 0:a.isEnabled)&&(0,s.jsxs)("div",{className:"pl-7 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Calendar ID"}),(0,s.jsx)(n.p,{value:(null==(t=m.googleCalendar)?void 0:t.calendarId)||"",onChange:e=>x({...m,googleCalendar:{...m.googleCalendar,calendarId:e.target.value}}),placeholder:"calendario@group.calendar.google.com",className:"max-w-md"}),(0,s.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"ID del calendario Google dove creare gli eventi"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Timezone"}),(0,s.jsx)(n.p,{value:(null==(c=m.googleCalendar)?void 0:c.timezone)||"Europe/Rome",onChange:e=>x({...m,googleCalendar:{...m.googleCalendar,timezone:e.target.value}}),placeholder:"Europe/Rome",className:"max-w-md"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Service Account Email"}),(0,s.jsx)(n.p,{value:(null==(d=m.googleCalendar)?void 0:d.serviceAccountEmail)||"",onChange:e=>x({...m,googleCalendar:{...m.googleCalendar,serviceAccountEmail:e.target.value}}),placeholder:"service-account@project.iam.gserviceaccount.com",className:"max-w-md"}),(0,s.jsx)("p",{className:"text-xs text-black/60 mt-1",children:"Email del service account Google per l'autenticazione"})]})]})]})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-lg text-black",children:"\uD83D\uDD27 Backup e Manutenzione"}),(0,s.jsx)("p",{className:"text-sm text-black/70",children:"Opzioni avanzate per backup e manutenzione del sistema."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["\uD83D\uDCCB ",(0,s.jsx)("strong",{children:"Info:"})," I backup automatici vengono eseguiti quotidianamente. I dati sono sempre sincronizzati tra ambiente locale, demo e produzione."]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{o.oR.success("✅ Sistema funzionante correttamente")},children:"\uD83D\uDD0D Verifica Sistema"}),(0,s.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{o.oR.success("\uD83D\uDCCA Statistiche generate con successo")},children:"\uD83D\uDCCA Genera Report"})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,s.jsx)(i.$,{onClick:b,disabled:h,className:"bg-primary hover:bg-primary/90",children:h?"Salvando...":"\uD83D\uDCBE Salva Impostazioni"})})]})]}):(0,s.jsxs)("main",{className:"container py-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Impostazioni Avanzate"}),(0,s.jsx)("p",{className:"mt-4 text-red-600",children:"Errore nel caricamento delle impostazioni"})]})}},3998:(e,a,t)=>{"use strict";t.d(a,{$:()=>o});var s=t(5155),l=t(2115),i=t(5889),n=t(2821);let o=(0,l.forwardRef)((e,a)=>{let{className:t,variant:l="primary",size:o="md",fullWidth:r,...c}=e;return(0,s.jsx)("button",{ref:a,className:(0,i.QP)((0,n.$)("btn",{primary:"btn-primary",secondary:"btn-outline",ghost:"hover:bg-[color:var(--muted-bg)]",outline:"btn-outline"}[l],{sm:"px-3 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[o],r&&"w-full"),t),...c})});o.displayName="Button"},5142:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(5155),l=t(2115),i=t(5889);let n=(0,l.forwardRef)((e,a)=>{let{className:t,label:l,error:n,id:o,...r}=e,c=o||r.name||"input";return(0,s.jsxs)("div",{className:"w-full",children:[l&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-medium mb-1 text-foreground",children:l}),(0,s.jsx)("input",{id:c,ref:a,className:(0,i.QP)("w-full rounded-lg border border-foreground/10 bg-background/70 backdrop-blur-sm px-3.5 py-2.5 text-sm text-foreground placeholder:text-foreground/50","focus:outline-none focus:ring-4 focus:ring-[rgba(var(--primary-rgb),0.15)] focus:ring-offset-0",n&&"border-accent",t),"aria-invalid":!!n,"aria-describedby":n?"".concat(c,"-error"):void 0,...r}),n&&(0,s.jsx)("p",{id:"".concat(c,"-error"),className:"mt-1 text-xs text-destructive",children:n})]})});n.displayName="Input"},8395:(e,a,t)=>{Promise.resolve().then(t.bind(t,601))}},e=>{e.O(0,[9135,3965,8744,9719,9018,8441,1255,7358],()=>e(e.s=8395)),_N_E=e.O()}]);